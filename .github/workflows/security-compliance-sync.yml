name: security-compliance-sync
on:
  push:
    branches:
      - main

jobs:
  sync-branches:
    runs-on: ubuntu-latest
    name: Syncing main to security-compliance branch
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Set up Node
        uses: actions/setup-node@v1
        with:
          node-version: 22
      - name: Get current date
        id: date
        run: echo "date=$(date +'%Y-%m-%d')" >> $GITHUB_OUTPUT
      - name: Opening pull request
        id: pull
        uses: tretuna/sync-branches@1.4.0
        with:
          GITHUB_TOKEN: ${{secrets.CHECK_API_TOKEN}}
          FROM_BRANCH: 'main'
          TO_BRANCH: 'security-compliance'
          PULL_REQUEST_TITLE: 'Sync main to security-compliance - ${{ steps.date.outputs.date }}'
          PULL_REQUEST_BODY: 'This is an automated pull request to sync the main branch to the security-compliance branch.'
          PULL_REQUEST_LABELS: 'sync'
          PULL_REQUEST_REVIEWERS: '["zherman0"]'
